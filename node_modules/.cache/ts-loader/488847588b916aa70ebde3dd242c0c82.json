{"remainingRequest":"/home/disha/ionic-sdk/node_modules/babel-loader/lib/index.js!/home/disha/ionic-sdk/node_modules/ts-loader/index.js??ref--14-2!/home/disha/ionic-sdk/node_modules/eslint-loader/index.js??ref--13-0!/home/disha/ionic-sdk/src/store/modules/user/actions.ts","dependencies":[{"path":"/home/disha/ionic-sdk/src/store/modules/user/actions.ts","mtime":1635508117002},{"path":"/home/disha/ionic-sdk/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/disha/ionic-sdk/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/disha/ionic-sdk/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/disha/ionic-sdk/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2Rpc2hhL2lvbmljLXNkay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IFVzZXJTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9Vc2VyU2VydmljZSc7CmltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4vbXV0YXRpb24tdHlwZXMnOwppbXBvcnQgeyBoYXNFcnJvciwgc2hvd1RvYXN0IH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCB7IHRyYW5zbGF0ZSB9IGZyb20gJ0AvaTE4bic7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IGVtaXR0ZXIgZnJvbSAnQC9ldmVudC1idXMnOwppbXBvcnQgIm1vbWVudC10aW1lem9uZSI7CnZhciBhY3Rpb25zID0gewogIC8qKgogICogTG9naW4gdXNlciBhbmQgcmV0dXJuIHRva2VuCiAgKi8KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgX3JlZjIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3A7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoOwogICAgICAgICAgICAgIHVzZXJuYW1lID0gX3JlZjIudXNlcm5hbWUsIHBhc3N3b3JkID0gX3JlZjIucGFzc3dvcmQ7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIFVzZXJTZXJ2aWNlLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghKHJlc3Auc3RhdHVzID09PSAyMDAgJiYgcmVzcC5kYXRhKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIXJlc3AuZGF0YS50b2tlbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb21taXQodHlwZXMuVVNFUl9UT0tFTl9DSEFOR0VELCB7CiAgICAgICAgICAgICAgICBuZXdUb2tlbjogcmVzcC5kYXRhLnRva2VuCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ2dldFByb2ZpbGUnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwLmRhdGEpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBpZiAoIWhhc0Vycm9yKHJlc3ApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNob3dUb2FzdCh0cmFuc2xhdGUoJ1NvcnJ5LCB5b3VyIHVzZXJuYW1lIG9yIHBhc3N3b3JkIGlzIGluY29ycmVjdC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKSk7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZXJyb3IiLCByZXNwLmRhdGEuX0VSUk9SX01FU1NBR0VfKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzcC5kYXRhLl9FUlJPUl9NRVNTQUdFXykpKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBzaG93VG9hc3QodHJhbnNsYXRlKCdTb21ldGhpbmcgd2VudCB3cm9uZycpKTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJlcnJvciIsIHJlc3AuZGF0YS5fRVJST1JfTUVTU0FHRV8pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXNwLmRhdGEuX0VSUk9SX01FU1NBR0VfKSkpOwoKICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyNDsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIHNob3dUb2FzdCh0cmFuc2xhdGUoJ1NvbWV0aGluZyB3ZW50IHdyb25nJykpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImVycm9yIiwgX2NvbnRleHQudDApOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihfY29udGV4dC50MCkpKTsKCiAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgMjRdXSk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBMb2dvdXQgdXNlcgogICAqLwogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgICAgICAgICAgLy8gVE9ETyBhZGQgYW55IG90aGVyIHRhc2tzIGlmIG5lZWQKICAgICAgICAgICAgICBjb21taXQodHlwZXMuVVNFUl9FTkRfU0VTU0lPTik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBHZXQgVXNlciBwcm9maWxlCiAgICovCiAgZ2V0UHJvZmlsZTogZnVuY3Rpb24gZ2V0UHJvZmlsZShfcmVmNCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBjb21taXQsIHJlc3AsIGxvY2FsVGltZVpvbmU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gVXNlclNlcnZpY2UuZ2V0UHJvZmlsZSgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgIGxvY2FsVGltZVpvbmUgPSBtb21lbnQudHouZ3Vlc3MoKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzcC5kYXRhLnVzZXJUaW1lWm9uZSAhPT0gbG9jYWxUaW1lWm9uZSkgewogICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ3RpbWVab25lRGlmZmVyZW50JywgewogICAgICAgICAgICAgICAgICAgIHByb2ZpbGVUaW1lWm9uZTogcmVzcC5kYXRhLnVzZXJUaW1lWm9uZSwKICAgICAgICAgICAgICAgICAgICBsb2NhbFRpbWVab25lOiBsb2NhbFRpbWVab25lCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbW1pdCh0eXBlcy5VU0VSX0lORk9fVVBEQVRFRCwgcmVzcC5kYXRhKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiB1cGRhdGUgY3VycmVudCBmYWNpbGl0eSBpbmZvcm1hdGlvbgogICAqLwogIHNldEZhY2lsaXR5OiBmdW5jdGlvbiBzZXRGYWNpbGl0eShfcmVmNSwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciBjb21taXQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICAgICAgICAgIGNvbW1pdCh0eXBlcy5VU0VSX0NVUlJFTlRfRkFDSUxJVFlfVVBEQVRFRCwgcGF5bG9hZC5mYWNpbGl0eSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBVcGRhdGUgdXNlciB0aW1lWm9uZQogICAqLwogIHNldFVzZXJUaW1lWm9uZTogZnVuY3Rpb24gc2V0VXNlclRpbWVab25lKF9yZWY2LCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgdmFyIHN0YXRlLCBjb21taXQsIHJlc3AsIGN1cnJlbnQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNi5zdGF0ZSwgY29tbWl0ID0gX3JlZjYuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gVXNlclNlcnZpY2Uuc2V0VXNlclRpbWVab25lKHBheWxvYWQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDUuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09PSAyMDAgJiYgIWhhc0Vycm9yKHJlc3ApKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50ID0gc3RhdGUuY3VycmVudDsKICAgICAgICAgICAgICAgIGN1cnJlbnQudXNlclRpbWVab25lID0gcGF5bG9hZC50eklkOwogICAgICAgICAgICAgICAgY29tbWl0KHR5cGVzLlVTRVJfSU5GT19VUERBVEVELCBjdXJyZW50KTsKICAgICAgICAgICAgICAgIHNob3dUb2FzdCh0cmFuc2xhdGUoIlRpbWUgem9uZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseSIpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSkoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IGFjdGlvbnM7"},{"version":3,"sources":["/home/disha/ionic-sdk/node_modules/eslint-loader/index.js??ref--13-0!/home/disha/ionic-sdk/src/store/modules/user/actions.ts"],"names":[],"mappings":"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","sourcesContent":["import { UserService } from '@/services/UserService'\nimport { ActionTree } from 'vuex'\nimport RootState from '@/store/RootState'\nimport UserState from './UserState'\nimport * as types from './mutation-types'\nimport { hasError, showToast } from '@/utils'\nimport { translate } from '@/i18n'\nimport moment from 'moment';\nimport emitter from '@/event-bus'\nimport \"moment-timezone\";\n\nconst actions: ActionTree<UserState, RootState> = {\n\n  /**\n * Login user and return token\n */\n  async login ({ commit, dispatch }, { username, password }) {\n    try {\n      const resp = await UserService.login(username, password)\n      if (resp.status === 200 && resp.data) {\n        if (resp.data.token) {\n            commit(types.USER_TOKEN_CHANGED, { newToken: resp.data.token })\n            dispatch('getProfile')\n            return resp.data;\n        } else if (hasError(resp)) {\n          showToast(translate('Sorry, your username or password is incorrect. Please try again.'));\n          console.error(\"error\", resp.data._ERROR_MESSAGE_);\n          return Promise.reject(new Error(resp.data._ERROR_MESSAGE_));\n        }\n      } else {\n        showToast(translate('Something went wrong'));\n        console.error(\"error\", resp.data._ERROR_MESSAGE_);\n        return Promise.reject(new Error(resp.data._ERROR_MESSAGE_));\n      }\n    } catch (err) {\n      showToast(translate('Something went wrong'));\n      console.error(\"error\", err);\n      return Promise.reject(new Error(err))\n    }\n    // return resp\n  },\n\n  /**\n   * Logout user\n   */\n  async logout ({ commit }) {\n    // TODO add any other tasks if need\n    commit(types.USER_END_SESSION)\n    \n  },\n\n  /**\n   * Get User profile\n   */\n  async getProfile ( { commit }) {\n    const resp = await UserService.getProfile()\n    if (resp.status === 200) {\n      const localTimeZone = moment.tz.guess();\n      if (resp.data.userTimeZone !== localTimeZone) {\n        emitter.emit('timeZoneDifferent', { profileTimeZone: resp.data.userTimeZone, localTimeZone});\n      }\n      commit(types.USER_INFO_UPDATED, resp.data);\n    }\n  },\n\n  /**\n   * update current facility information\n   */\n  async setFacility ({ commit }, payload) {\n    commit(types.USER_CURRENT_FACILITY_UPDATED, payload.facility);\n  },\n  \n  /**\n   * Update user timeZone\n   */\n  async setUserTimeZone ( { state, commit }, payload) {\n    const resp = await UserService.setUserTimeZone(payload)\n    if (resp.status === 200 && !hasError(resp)) {\n      const current: any = state.current;\n      current.userTimeZone = payload.tzId;\n      commit(types.USER_INFO_UPDATED, current);\n      showToast(translate(\"Time zone updated successfully\"));\n    }\n  }\n}\n\nexport default actions;"],"sourceRoot":""}]}